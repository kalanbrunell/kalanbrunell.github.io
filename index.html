<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kalan Brunell — Engineering Portfolio</title>

<!-- Meta / SEO -->
<link rel="icon" href="/favicon.ico">
<meta name="description" content="Kalan Brunell — Engineering Portfolio">
<meta property="og:title" content="Kalan Brunell — Engineering Portfolio">
<meta property="og:description" content="Kalan Brunell's engineering portfolio showcasing projects in embedded systems and robotics.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kalanbrunell.site/">
<meta property="og:image" content="https://kalanbrunell.site/og-card.jpg">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1149WE8N1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-B1149WE8N1');
</script>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;800&family=Inter:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: linear-gradient(135deg,#f2f3f4 0%, #eaeaea 100%);
    --text:#212121;
    --muted:#5e6770;
    --card:#ffffff;
    --accent:#00447c;       /* navy (primary) */
    --accent-hover:#002756; /* deep navy (hover) */
    --accent-alt:#035b7a;   /* teal (secondary) */
    --neutral:#c6c3b6;      /* divider/beige */
  }

  *{box-sizing:border-box}
  html{scroll-behavior:smooth;}
  :target{scroll-margin-top:80px;}

  body{
    margin:0;
    font:16px/1.6 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color:var(--text);
    background:var(--bg);
  }
  h1,h2,h3{
    font-family:"Playfair Display", serif;
    margin:0 0 10px;
    color:var(--accent);
  }
  a{ color:var(--accent); text-decoration:none; transition:color .2s ease; }
  a:hover{ color:var(--accent-alt); }
  .container{max-width:1100px; margin:0 auto; padding:32px 20px;}

  /* Nav */
  .nav{
    position:sticky; top:0; z-index:10;
    display:flex; justify-content:space-between; align-items:center;
    font-family:"Playfair Display", serif;
    padding:16px 20px; margin-bottom:28px;
    background:linear-gradient(135deg,#f2f3f4 0%, #eaeaea 100%);
    border-bottom:1px solid var(--neutral);
  }
  .brand{font-weight:800; font-size:24px; color:var(--accent);}
  .nav a{margin-left:16px; color:var(--muted); padding:6px 8px; border-radius:8px;}
  .nav a:hover{color:#fff; background:var(--accent);}
  .nav a.active{color:#fff; background:var(--accent-alt);}

  /* Cards */
  .card{
    background:var(--card);
    border-radius:14px;
    padding:24px;
    box-shadow:0 2px 8px rgba(0,0,0,.08);
    border-top:4px solid var(--accent);
    transition:box-shadow .18s ease, border-color .18s ease;
    /* make cards use flex layout so content flows naturally when height is constrained */
    display:flex;
    flex-direction:column;
  }
  .card:hover{ box-shadow:0 8px 22px rgba(0,0,0,.16); border-top-color:var(--accent-alt); }

  /* Layouts */
  .hero{
    display:grid;
    /* fixed right column provides consistent sizing for contact + resume */
    grid-template-columns: 1.4fr 360px;
    gap:24px;
    /* let the two right-column cards split the height evenly */
    grid-auto-rows: 1fr;
    align-items:stretch;
  }
  .hero-main{
    grid-row: span 2; /* left card spans two rows */
    height:100%;
    align-self:stretch;
  }
  .hero-side{
    grid-column: 2;   /* right column stack */
    height:100%;
    align-self:stretch;
  }
  .section{margin-top:56px; border-top:2px solid var(--neutral); padding-top:40px;}
  .two-col{display:grid; grid-template-columns:1fr 1fr; gap:24px;}
  .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:24px;}

  /* Headshot */
  .headshot{
    width:160px; height:160px;
    border-radius:50%; object-fit:cover;
    margin-bottom:14px;
    box-shadow:0 2px 8px rgba(0,0,0,.14);
  }

  /* Skills pills */
  .pill{
    display:inline-block; padding:6px 12px; border-radius:999px; font-size:14px; margin:6px 8px 0 0;
    background:transparent;
    border:1px solid #a7a59a; /* stronger border for contrast */
    color:#0f2a45;            /* deeper text color */
  }
  .skills h4{
    margin:12px 0 4px; color:var(--muted); font-weight:600; letter-spacing:.02em; font-size:14px;
  }

  /* Buttons */
  .btn{
    display:inline-block; padding:10px 14px; border-radius:10px; font-weight:600;
    background:var(--accent); color:#fff; text-decoration:none; transition:transform .05s ease, background .2s ease;
  }
  .btn:hover{ background:var(--accent-alt); }
  .btn:active{ transform:translateY(1px); }

  .btn--ghost{
    display:inline-block; padding:10px 14px; border-radius:10px; font-weight:600;
    border:1px solid var(--neutral); color:var(--accent); background:transparent; text-decoration:none;
  }
  .btn--ghost:hover{ border-color:var(--accent); color:var(--accent-hover); }

  /* Slightly smaller resume card variant */
  .resume-card{
    padding:16px;            /* reduced padding */
    border-radius:12px;
    border-top-width:3px;    /* thinner top accent */
    font-size:0.98rem;       /* slightly smaller text */
  }

  .resume-cta{ display:flex; flex-direction:column; gap:12px; }
  .resume-cta__row{ display:flex; gap:14px; flex-wrap:wrap; }
  .resume-cta small{ color:var(--muted); }

  /* Clickable cards (projects/expandables) */
  .openable{ cursor:pointer; user-select:none; }

  /* Modal */
  .modal{
    position:fixed; inset:0;
    display:none;
    align-items:center; justify-content:center;
    background:rgba(0,0,0,.60);
    padding:24px; z-index:1000;
  }
  .modal[open]{ display:flex; }
  .modal__panel{
    background:#fff;
    color:#1f2937;
    width:min(1100px, 96vw);
    max-height:90vh;
    border-radius:16px;
    overflow:auto;
    box-shadow:0 20px 60px rgba(0,0,0,.35);
    border-top:6px solid var(--accent);
  }
  .modal__head{
    position:sticky; top:0;
    background:linear-gradient(#ffffff, #ffffffee);
    display:flex; justify-content:space-between; align-items:center;
    padding:16px 20px; border-bottom:1px solid var(--neutral); z-index:1;
  }
  .modal__title{ margin:0; font-family:"Playfair Display", serif; font-size:22px; color:var(--accent); }
  .modal__close{ border:none; background:#f3f4f6; padding:8px 12px; border-radius:10px; cursor:pointer; }
  .modal__close:hover{ background:var(--accent-alt); color:#fff; }
  .modal__body{ padding:20px; display:grid; grid-template-columns: 1fr; gap:16px; }
  .modal__meta{ color:var(--muted); font-size:14px; }
  .figure{ background:#fafafa; border:1px solid var(--neutral); border-radius:12px; padding:10px; }
  .figure img{ width:100%; height:auto; display:block; border-radius:8px; }
  .figure figcaption{ font-size:13px; color:#64748b; margin-top:8px; }

  pre{ background:#0b1020; color:#e5e7eb; padding:12px; border-radius:10px; overflow:auto; }

  @media (max-width: 900px){
    .hero{ grid-template-columns:1fr; }
    .hero-main{ grid-row:auto; }
    .hero-side{ grid-column:auto; }
    .two-col{ grid-template-columns:1fr; }
  }
</style>
</head>
<body>
  <div class="nav">
    <div class="brand">Kalan Brunell</div>
    <div>
      <a href="#about">About</a>
      <a href="#experience">Experience</a>
      <a href="#projects">Projects</a>
      <a href="#skills">Skills</a>
      <a href="#contact">Contact</a>
    </div>
  </div>

  <div class="container">
    <!-- HERO -->
    <section id="about" class="hero">
      <!-- Left column (spans two rows) -->
      <div class="card hero-main">
        <div style="display: flex; align-items: center; gap: 20px; min-height: 160px;">
          <img src="headshot.jpg" alt="Headshot of Kalan Brunell" class="headshot" style="margin-left: 12px;">
          <span style="font-size: 2.2rem; font-weight: 700; color: var(--accent); font-family: 'Playfair Display', serif; margin-left: 48px;">Kalan Brunell</span>
        </div>
        <p style="margin-top:6px; color:var(--muted); font-weight:600;">
          Computer Engineering | Robotics and Embedded Systems
        </p>
        <h2>About Me</h2>
        <p>I'm a third-year Computer Engineering student at Tufts University, concentrating on embedded systems and digital design. 
          My work has included building safety-critical circuits for electric vehicles, writing STM32 firmware for real-time monitoring, 
          and developing vision pipelines for industrial robotics. I enjoy tackling complex problems that require both hardware and 
          software expertise, and I aim to create solutions that are reliable, efficient, and practical.</p>
      </div>

      <!-- Right column (row 1) -->
      <div class="card hero-side" id="contact">
        <h2>Contact</h2>
        <p>Email: <a href="mailto:kbrune06@gmail.com">kbrune06@gmail.com</a></p>
        <p>LinkedIn: <a href="https://www.linkedin.com/in/kalan-brunell-50b65b286/" target="_blank" rel="noopener">kalan-brunell-50b65b286</a></p>
      </div>

    <!-- Right column (row 2) — Resume card stacked under Contact -->
    <div class="card hero-side resume-card">
        <h2>Resume</h2>
        <div style="display:flex; gap:14px; flex-wrap:wrap;">
      <a class="btn" href="/assets/resume.pdf" download>Download Resume (PDF)</a>
        </div>
      </div>
    </section>

    <!-- Engineering Experience -->
    <section id="experience" class="section">
      <h2>Engineering Experience</h2>
      <div class="two-col">
        <!-- Make this card expandable via modal -->
        <div class="card openable" data-open-modal="exp-gentex" tabindex="0" role="button" aria-label="Open Gentex internship details">
          <h3>Manufacturing Engineering Intern — Gentex Corporation</h3>
          <p>Designed and deployed a 2D vision inspection cell for production:</p>
          <ul>
            <li>Raspberry Pi + OpenCV feature detection and metrology.</li>
            <li>Industrial sensor I/O; custom interface to PLC & robot.</li>
            <li>Fixture design, test plans, and documentation.</li>
          </ul>
          <p style="color:var(--muted); font-size:14px; margin-top:8px;">View more details →</p>
        </div>

        <aside class="card">
          <h3>At a Glance — Engineering Extracurriculars</h3>
          <ul>
            <li><strong>Formula Hybrid-Electric (FSAE) — Tufts Electric Racing</strong><br>2024 – Current</li>
            <li><strong>FIRST Robotics — Lakerbots 8046</strong><br>2022 – 2023</li>
          </ul>
        </aside>
      </div>
    </section>

    <!-- Projects -->
    <section id="projects" class="section">
      <h2>Projects</h2>
      <div class="grid">
        <div class="card openable" data-open-modal="proj-obd">
          <h3>OBD-II Shift Bar</h3>
          <p>STM32 + 74HC595 driving an 8-LED bar with PWM brightness control.</p>
          <p style="color:var(--muted); font-size:14px;">View details →</p>
        </div>
        <div class="card openable" data-open-modal="proj-2048">
          <h3>2048 in VHDL</h3>
          <p>iCE40 FPGA, VGA timing (HSYNC/VSYNC), NES controller input.</p>
          <p style="color:var(--muted); font-size:14px;">View details →</p>
        </div>
        <div class="card openable" data-open-modal="proj-fanuc">
          <h3>Fanuc Robot Vision</h3>
          <p>ifm O2D502 offsets, two’s-complement conversion, 0.222 mm/px scaling.</p>
          <p style="color:var(--muted); font-size:14px;">View details →</p>
        </div>
      </div>
    </section>

    <!-- Skills -->
    <section id="skills" class="section">
      <h2>Skills</h2>
      <div class="skills">
        <h4>Firmware</h4>
        <span class="pill">STM32</span>
        <span class="pill">C/C++</span>
        <span class="pill">FreeRTOS</span>
        <span class="pill">CMSIS</span>

        <h4>Electronics</h4>
        <span class="pill">CAN</span>
        <span class="pill">I²C</span>
        <span class="pill">FPGA / VHDL</span>
        <span class="pill">Benchtop Tools</span>

        <h4>Tools</h4>
        <span class="pill">Python</span>
        <span class="pill">OpenCV</span>
        <span class="pill">Altium / KiCad</span>
        <span class="pill">LTspice</span>
      </div>
    </section>
  </div>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-body">
    <div class="modal__panel" role="document">
      <div class="modal__head">
        <h3 class="modal__title" id="modal-title">Details</h3>
        <button class="modal__close" id="modal-close" aria-label="Close">✕</button>
      </div>
      <div class="modal__body" id="modal-body"></div>
    </div>
  </div>

  <!-- TEMPLATES -->
  <template id="tmpl-exp-gentex">
    <div class="modal__meta">Manufacturing Engineering Intern · 2025 · Gentex Corporation</div>
    <p><strong>Goal:</strong> Stand up a reliable 2D vision inspection cell for production use.</p>
    <p><strong>Contributions:</strong></p>
    <ul>
      <li>Developed OpenCV pipelines on Raspberry Pi for feature detection and metrology.</li>
      <li>Implemented robust I/O to PLC and robot controller; designed custom interface hardware.</li>
      <li>Created fixture concepts, test plans, and operator documentation for handoff.</li>
    </ul>
    <p><strong>Technical Notes:</strong> Python, OpenCV, GPIO/industrial I/O, Ethernet/field I/O, image thresholding, morphology, and calibration.</p>
    <!-- <figure class="figure">
      <img src="images/gentex-cell.jpg" alt="Gentex vision inspection cell">
      <figcaption>Vision cell prototype prior to deployment.</figcaption>
    </figure> -->
  </template>

  <template id="tmpl-proj-obd">
    <div class="modal__meta">STM32L432KC · 74HC595 · OBD-II UART · PWM · 2025</div>
    <p><strong>Goal:</strong> Read engine RPM via OBD-II and drive an 8-LED shift bar through a 74HC595 with adjustable brightness.</p>
    <p><strong>Role:</strong> Firmware + hardware integration (OBD-II adapter, UART parsing, LED driver).</p>
    <p><strong>Stack:</strong> C on STM32, UART, timer PWM, shift-register bit-banging/SPI, simple EMA smoothing.</p>
    <p><strong>Notes:</strong> Designed for minimal wiring; brightness via potentiometer to ADC → PWM duty.</p>
  </template>

  <template id="tmpl-proj-2048">
    <div class="modal__meta">iCE40 · VHDL · VGA · NES Controller · 2024</div>
    <p><strong>Goal:</strong> Implement the 2048 game entirely in hardware.</p>
    <p><strong>Highlights:</strong> VGA timing generator (HSYNC/VSYNC), tile renderer, NES controller input, finite-state game logic.</p>
    <p><strong>Challenges:</strong> Clock domain crossing for input; resource budgeting on iCE40.</p>
  </template>

  <template id="tmpl-proj-fanuc">
    <div class="modal__meta">Fanuc · ifm O2D502 · Python · PLC/Robot I/O · 2025</div>
    <p><strong>Goal:</strong> Vision-guided positioning using camera-to-robot frame offsets.</p>
    <p><strong>Details:</strong> Two’s-complement conversion, scaling 0.222 mm/px, Ethernet/IO to PLC, error handling and retries.</p>
  </template>

<script>
  // Modal logic + focus management
  const modal = document.getElementById('modal');
  const modalBody = document.getElementById('modal-body');
  const modalTitle = document.getElementById('modal-title');
  const closeBtn = document.getElementById('modal-close');
  let lastFocused = null;

  function openModal(templateId, titleText){
    const tmpl = document.getElementById('tmpl-' + templateId);
    if(!tmpl) return;
    lastFocused = document.activeElement;
    modalBody.innerHTML = tmpl.innerHTML;
    modalTitle.textContent = titleText || 'Details';
    modal.setAttribute('open','');
    modal.setAttribute('aria-hidden','false');
    closeBtn.focus();
    document.body.style.overflow = 'hidden';
  }
  function closeModal(){
    modal.removeAttribute('open');
    modal.setAttribute('aria-hidden','true');
    modalBody.innerHTML = '';
    document.body.style.overflow = '';
    if (lastFocused) lastFocused.focus();
  }

  // Click/keyboard open for any card with data-open-modal
  function attachOpenHandlers(){
    document.querySelectorAll('.card[data-open-modal]').forEach(card => {
      card.addEventListener('click', () => {
        const key = card.getAttribute('data-open-modal');
        const title = card.querySelector('h3')?.textContent || 'Details';
        openModal(key, title);
      });
      card.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); card.click(); }
      });
    });
  }
  attachOpenHandlers();

  closeBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape' && modal.hasAttribute('open')) closeModal();
  });

  // Light focus trap inside modal
  function trapFocus(e){
    if(!modal.hasAttribute('open')) return;
    const focusables = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
    if(!focusables.length) return;
    const first = focusables[0], last = focusables[focusables.length - 1];
    if(e.key === 'Tab'){
      if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    }
  }
  document.addEventListener('keydown', trapFocus);

  // Active nav highlight on scroll
  const sections = document.querySelectorAll('section[id]');
  const navLinks = Array.from(document.querySelectorAll('.nav a'));
  const linkFor = id => navLinks.find(a => a.getAttribute('href') === '#'+id);

  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const id = entry.target.id;
      const link = linkFor(id);
      if(!link) return;
      if(entry.isIntersecting){
        navLinks.forEach(a => a.classList.remove('active'));
        link.classList.add('active');
      }
    });
  }, {rootMargin: "-40% 0px -50% 0px", threshold: 0});

  sections.forEach(s => io.observe(s));
</script>
</body>
</html>
